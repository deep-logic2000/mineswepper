(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var i=s.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!t;)t=i[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=class{constructor({parentNode:e=null,tag:t="div",className:s="",content:i="",attributes:a={}}){const r=document.createElement(t);r.classList.add(s),r.innerHTML=i,Object.entries(a).forEach((([e,t])=>r.setAttribute(e,t))),e&&e.append(r),this.node=r}},s=e.p+"assets/1361133edc901e948ec1.png",i=e.p+"assets/4e65bfe303a0d4181d33.png",a=new class{constructor(){this.parentNode=document.body,this.modalWrapper=document.createElement("div"),this.content=""}renderScoresModal(e){this.createModal();let t="";for(let s=e?e.length+1:1;s<=10;s++)t+=`<tr><td>${s}</td></tr>`;this.modalTitle.node.textContent="Last scores",this.modalBody.node.insertAdjacentHTML("afterbegin",`\n    <table class="table">\n    <tbody>\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>Date and time</th>\n        <th>Difficulty</th>\n        <th>Mines in game</th>\n        <th>Movies</th>\n        <th>Time</th>\n    </tr>\n</thead>\n        ${e?e.map(((e,t)=>`\n            <tr>\n            <td>${t+1}</td>\n        <td>${new Date(e.date).getDate()}-${new Date(e.date).getMonth()+1}-${new Date(e.date).getFullYear()} ${new Date(e.date).getHours()}:${new Date(e.date).getMinutes()}</td>\n        <td>${e.difficulty}</td>\n        <td>${e.mines}</td>\n        <td>${e.movies}</td>\n        <td>${e.time}</td>\n        </tr>\n        `)).join(""):""}\n        ${t}\n    </tbody>\n    </table>\n    `)}createModal(){this.backgroundLayout=new t({className:"modal-background",parentNode:this.parentNode}),this.modalWrapper=new t({className:"modal-wrapper",parentNode:this.parentNode}),this.modalTitle=new t({tag:"h2",className:"title",parentNode:this.modalWrapper.node}),this.modalBody=new t({className:"modal-body",parentNode:this.modalWrapper.node}),this.closeButton=new t({tag:"button",className:"button",parentNode:this.modalWrapper.node}),this.closeButton.node.innerText="Close",this.closeButton.node.classList.add("button_close"),this.closeButton.node.addEventListener("click",(()=>this.closeModal())),this.backgroundLayout.node.addEventListener("click",(()=>this.closeModal())),document.body.classList.add("body__overflow")}renderWinModal({isWin:e},t){this.createModal(),this.modalWrapper.node.classList.add("modal_win_info"),this.modalBody.node.classList.add(e?"modal-body_win":"modal-body_lose"),this.modalBody.node.append(t)}closeModal(){this.backgroundLayout.node.remove(),this.modalWrapper.node.remove(),document.body.classList.remove("body__overflow")}},r=e.p+"assets/2dbfdb34f246913cd449.mp3",n=e.p+"assets/9f43cdfe5d066f6d6bc8.mp3",o=e.p+"assets/c9057ca74c53baf8fbe0.mp3",l=e.p+"assets/6dbd5230a6085cc8b12c.mp3",d=e.p+"assets/9e89ce9ef9b3010cdde2.mp3",h=new class{constructor(){this.openCell=new Audio(r),this.openSeveralCells=new Audio(n),this.setFlag=new Audio(o),this.winGame=new Audio(l),this.loseGame=new Audio(d),this.isSoundOn=!0}openCellPlay(){this.isSoundOn&&this.openCell.play()}openSeveralCellsPlay(){this.isSoundOn&&this.openSeveralCells.play()}flagSetPlay(){this.isSoundOn&&this.setFlag.play()}winGamePlay(){this.isSoundOn&&this.winGame.play()}loseGamePlay(){this.isSoundOn&&(this.loseGame.volume=.2,this.loseGame.play())}changeIsSoundOn(e){this.isSoundOn=e}},c=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},m=e=>JSON.parse(localStorage.getItem(e))||null,p=new class{constructor(){this.parentNode=document.body}init(e){this.createHeader(),this.createLogoBlock(),this.createDifficultyPanel(e),this.createDifficultySelect(),this.createIconsWrapper(),this.addListeners()}createHeader(){this.header=new t({tag:"header",className:"header",parentNode:this.parentNode}),this.container=new t({className:"container",parentNode:this.header.node}),this.headerWrapper=new t({className:"header-wrapper",parentNode:this.container.node})}createLogoBlock(){this.logoWrapper=new t({className:"logo-wrapper",parentNode:this.headerWrapper.node}),this.logoImgWrapper=new t({className:"logo-img-wrapper",parentNode:this.logoWrapper.node}),this.logoImg=new t({tag:"img",className:"logo-img",attributes:{src:s,alt:"Minesweeper Logo"},parentNode:this.logoImgWrapper.node}),this.logoText=new t({tag:"h1",className:"logo-text",parentNode:this.logoWrapper.node}),this.logoText.node.innerText="Minesweeper"}createDifficultyPanel(e){this.difficultyPanelWrapper=new t({className:"difficulty-panel-wrapper",parentNode:this.headerWrapper.node}),this.easyDifficultyButton=new t({tag:"button",className:"button",parentNode:this.difficultyPanelWrapper.node}),this.easyDifficultyButton.node.classList.add("button_easy"),this.easyDifficultyButton.node.innerText="Easy 10*10",this.mediumDifficultyButton=new t({tag:"button",className:"button",parentNode:this.difficultyPanelWrapper.node}),this.mediumDifficultyButton.node.classList.add("button_medium"),this.mediumDifficultyButton.node.innerText="Medium 15*15",this.hardDifficultyButton=new t({tag:"button",className:"button",parentNode:this.difficultyPanelWrapper.node}),this.hardDifficultyButton.node.classList.add("button_hard"),this.hardDifficultyButton.node.innerText="Hard 25*25",this.switchActiveButton(e)}createDifficultySelect(){this.selectWrapper=new t({className:"select-wrapper",parentNode:this.headerWrapper.node}),this.select=new t({tag:"select",className:"select",parentNode:this.selectWrapper.node}),this.select.node.insertAdjacentHTML("afterbegin",`\n    ${[{name:"10",value:"Easy 10*10"},{name:"15",value:"Medium 15*15"},{name:"25",value:"Hard 25*25"}].map((e=>`<option class="option" value='${e.name}'>${e.value}</option>`)).join("")}\n`),this.select.node.addEventListener("change",(()=>this.handleSelect()))}handleSelect(){f.switchDifficulty({width:Number(this.select.node.value),height:Number(this.select.node.value)})}addListeners(){this.hardDifficultyButton.node.addEventListener("click",(()=>{f.switchDifficulty({width:25,height:25}),this.switchActiveButton(25)})),this.mediumDifficultyButton.node.addEventListener("click",(()=>{f.switchDifficulty({width:15,height:15}),this.switchActiveButton(15)})),this.easyDifficultyButton.node.addEventListener("click",(()=>{f.switchDifficulty({width:10,height:10}),this.switchActiveButton(10)}))}createIconsWrapper(){this.iconsWrapper=new t({className:"icons-wrapper",parentNode:this.headerWrapper.node}),this.createTropheyImage(),this.createSoundSwitcher(),this.createThemeSwitcher()}createTropheyImage(){this.tropheyWrapper=new t({className:"trophey-img-wrapper",parentNode:this.iconsWrapper.node}),this.tropheyImg=new t({tag:"img",className:"trophey-img",attributes:{src:i,alt:"Scores"},parentNode:this.tropheyWrapper.node}),this.tropheyWrapper.node.addEventListener("click",(()=>{const e=m("lastResults");a.renderScoresModal(e)}))}createSoundSwitcher(){this.soundSwitcherWrapper=new t({className:"sound-switcher-wrapper",parentNode:this.iconsWrapper.node}),this.soundSwitcher=new t({tag:"input",className:"sound-switch",attributes:{type:"checkbox",id:"sound-switch",name:"sound-switch"},parentNode:this.soundSwitcherWrapper.node}),this.label=new t({tag:"label",className:"sound-switch-label",attributes:{for:"sound-switch"},parentNode:this.soundSwitcherWrapper.node}),this.soundSwitcher.node.addEventListener("change",(e=>{document.body.classList.contains("sound-off")?(document.body.classList.remove("sound-off"),h.changeIsSoundOn(!0)):(document.body.classList.add("sound-off"),h.changeIsSoundOn(!1))}))}createThemeSwitcher(){this.themeSwitcherWrapper=new t({className:"theme-switcher-wrapper",parentNode:this.iconsWrapper.node}),this.switcher=new t({tag:"input",className:"theme-switch",attributes:{type:"checkbox",id:"theme-switch",name:"theme-switch"},parentNode:this.themeSwitcherWrapper.node}),this.label=new t({tag:"label",className:"switch-label",attributes:{for:"theme-switch"},parentNode:this.themeSwitcherWrapper.node}),this.switcher.node.addEventListener("change",(e=>document.body.classList.toggle("theme-dark")))}switchActiveButton(e){switch(this.easyDifficultyButton.node.classList.remove("active"),this.mediumDifficultyButton.node.classList.remove("active"),this.hardDifficultyButton.node.classList.remove("active"),e){case 10:this.easyDifficultyButton.node.classList.add("active");break;case 15:this.mediumDifficultyButton.node.classList.add("active");break;case 25:this.hardDifficultyButton.node.classList.add("active")}}},u=e.p+"assets/3910263c2589cad0fee3.png",b=e.p+"assets/e597fde08df4d7ee7e2f.png",w=new class{constructor(){this.timerData=0,this.moviesData=0}init(e,t){this.createInfoPanel(),this.createTimerScoreBoard(),this.createMinesAmountInput(e,t),this.createMoviesCountBoard()}createInfoPanel(){this.infoPanelWrapper=new t({className:"info-panel-wrapper"}),this.infoPanelWrapperMiddle=new t({className:"info-panel-wrapper-middle",parentNode:this.infoPanelWrapper.node}),this.infoPanelWrapperInside=new t({className:"info-panel-wrapper-inside",parentNode:this.infoPanelWrapperMiddle.node}),this.timerAndMoviesWrapper=new t({className:"time-movies-wrapper",parentNode:this.infoPanelWrapperInside.node}),this.parentNode=document.querySelector(".boardWrapper"),this.parentNode.prepend(this.infoPanelWrapper.node)}createTimerScoreBoard(){this.timerBoard=new t({className:"timer-board-wrapper",parentNode:this.timerAndMoviesWrapper.node}),this.clockImgWrapper=new t({className:"timer-img-wrapper",parentNode:this.timerBoard.node}),this.clockImg=new t({tag:"img",className:"timer-img",attributes:{src:u,alt:"Timer"},parentNode:this.clockImgWrapper.node}),this.timerBoardSecondsLine=document.createElement("span"),this.timerBoardSecondsLine.innerText=this.timerData,this.timerBoard.node.append(this.timerBoardSecondsLine)}updateTimer(e){this.timerData=e,this.timerBoardSecondsLine.innerText=this.timerData}createMoviesCountBoard(){this.moviesBoard=new t({className:"movies-board-wrapper",parentNode:this.timerAndMoviesWrapper.node}),this.moviesImgWrapper=new t({className:"movies-img-wrapper",parentNode:this.moviesBoard.node}),this.moviesImg=new t({tag:"img",className:"movies-img",attributes:{src:b,alt:"Movies"},parentNode:this.moviesImgWrapper.node}),this.moviesBoardLine=document.createElement("span"),this.moviesBoardLine.innerText=this.moviesData,this.moviesBoard.node.append(this.moviesBoardLine)}updateMoviesData(e){this.moviesData=e,this.moviesBoardLine.innerText=this.moviesData}createStartGameButton(e){this.startButton=document.createElement("button"),this.startButton.classList.add("start-button"),this.startButton.innerText="New Game",this.startButton.addEventListener("click",e),this.infoPanelWrapperInside.node.append(this.startButton)}createSaveGameButton(e){this.saveButton=document.createElement("button"),this.saveButton.classList.add("save-button"),this.saveButton.innerText="Save Game",this.saveButton.addEventListener("click",e),this.infoPanelWrapperInside.node.append(this.saveButton)}createLoadGameButton(e){this.loadButton=document.createElement("button"),this.loadButton.classList.add("load-button"),this.loadButton.innerText="Load Game",this.loadButton.addEventListener("click",e),this.infoPanelWrapperInside.node.append(this.loadButton)}createMinesAmountInput(e,s){this.inputMinesWrapper=new t({className:"input-wrapper",parentNode:this.timerAndMoviesWrapper.node}),this.minesLabel=new t({tag:"label",className:"input-label",content:"Mines: ",attributes:{for:"mines"},parentNode:this.inputMinesWrapper.node}),this.minesText=new t({tag:"span",className:"mines-count-text",content:e,parentNode:this.minesLabel.node}),this.inputMinesAmount=new t({tag:"input",className:"input-range",attributes:{type:"range",id:"mines",min:"10",max:"99",name:"mines",value:e},parentNode:this.inputMinesWrapper.node}),this.changeMinesCount(s)}changeMinesCount(e){this.timerAndMoviesWrapper.node.addEventListener("input",(t=>{this.minesTextNode=document.querySelector(".mines-count-text"),this.minesTextNode.textContent=t.target.value,e(t.target.value)}))}},f=new class{constructor(){this.widthCells=10,this.heightCells=10,this.bombAmount=10,this.cellsNodeArr=[],this.cellsClassArr=[],this.arrayWithNumbersInCells=[],this.bombsLeftToReveal=this.bombAmount,this.timer=0,this.clickCount=0,this.isGameLosed=!1,this.isGameWon=!1,this.currentTarget=null}init(){p.init(this.widthCells),this.createBoard(),this.addListeners(),this.createBombsDataArrs(),this.tempBombAmount=this.bombAmount}startNewGame(){this.isGameLosed=!1,this.isGameWon=!1,this.cellsClassArr=[],this.arrayWithNumbersInCells=[];for(let e=0;e<this.widthCells*this.heightCells;e++){const t=this.cellsNodeArr[e];t.className="cell",t.innerText=""}this.timer=0,this.clickCount=0,this.tempBombAmount=this.bombAmount,w.updateTimer(this.timer),w.updateMoviesData(this.clickCount),this.stopTimer(),this.createBombsDataArrs()}createBoard(){this.mainSection&&this.mainSection.node.remove(),this.mainSection=new t({tag:"main",className:"main"}),this.boardWrapper=new t({className:"boardWrapper",parentNode:this.mainSection.node}),this.boardWrapperOutside=new t({className:"boardWrapperOutside",parentNode:this.boardWrapper.node}),this.boardWrapperMiddle=new t({className:"boardWrapperMiddle",parentNode:this.boardWrapperOutside.node}),this.boardWrapperInside=new t({className:"boardWrapperInside",parentNode:this.boardWrapperMiddle.node}),this.header=document.querySelector("header"),this.header.after(this.mainSection.node),this.changeWidthCells();for(let e=0;e<this.widthCells*this.heightCells;e++)this.createCell(e);w.init(this.bombAmount,this.changeBombsAmount.bind(this)),w.createStartGameButton(this.startNewGame.bind(this)),w.createSaveGameButton(this.saveCurrentProgress.bind(this)),w.createLoadGameButton(this.restoreProgress.bind(this)),this.addMouseOverListeners()}createBombsDataArrs(){this.cellsClassArr=[],this.arrayWithNumbersInCells=[],this.cellsClassArr=this.createCellsShuffledArray(),this.cellsNodeArr=document.querySelectorAll(".cell"),this.arrayWithNumbersInCells=this.createNumbersArray(this.cellsClassArr)}createCell(e){this.cell=new t({className:"cell",parentNode:this.boardWrapperInside.node,attributes:{id:e}})}createCellsShuffledArray(){this.bombsArray=Array(this.bombAmount).fill("bomb");const e=Array(this.widthCells*this.heightCells-this.bombAmount).fill("notBomb").concat(this.bombsArray);return this.shuffleArray(e)}shuffleArray(e){for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}createNumbersArray(e){for(let t=0;t<e.length;t++){let e=this.checkCountOfMines(t);this.arrayWithNumbersInCells.push(e)}return this.arrayWithNumbersInCells}checkCountOfMines(e){let t=0;const s=e%this.widthCells==0,i=e%this.widthCells==this.widthCells-1,a=e=>"bomb"===this.cellsClassArr[e];return"notBomb"===this.cellsClassArr[e]&&(e>0&&!s&&a(e-1)&&t++,e<this.cellsNodeArr.length&&!i&&a(e+1)&&t++,e>=this.widthCells&&a(e-this.widthCells)&&t++,e<this.cellsNodeArr.length-this.widthCells&&a(e+this.widthCells)&&t++,e>this.widthCells&&!s&&a(e-this.widthCells-1)&&t++,e>=this.widthCells&&!i&&a(e-this.widthCells+1)&&t++,e<this.cellsNodeArr.length-this.widthCells&&!s&&a(e+this.widthCells-1)&&t++,e<this.cellsNodeArr.length-this.widthCells-1&&!i&&a(e+this.widthCells+1)&&t++),t}handleMouseDown(e){if(!this.isGameLosed&&!this.isGameWon)switch(e.button){case 0:this.mouseDown=!0,e.target.classList.contains("cell")&&!e.target.classList.contains("flag")&&e.target.classList.add("pressed");break;case 2:if(!e.target.classList.contains("cell"))return;this.handleAddFlag(e.target);break;default:return}}handleMouseUp(e,t){if(this.mouseDown=!1,this.isGameLosed)return;if(this.isGameWon)return;if(2===t||e.classList.contains("checked"))return;if(e.classList.contains("flag")||!e.classList.contains("cell"))return;const s=e.getAttribute("id"),i="bomb"===this.cellsClassArr[s];if(0===this.clickCount&&i)return this.createBombsDataArrs(),void this.handleMouseUp(e,t);if(!this.interval&&e.classList.contains("cell")&&this.startTimer(),0===t&&e.classList.contains("cell")&&this.clickCount++,w.updateMoviesData(this.clickCount),"bomb"===this.cellsClassArr[s])return this.explodedCellId=s,e.classList.add("exploded-cell"),void this.gameLosed();const a=this.arrayWithNumbersInCells[s];if(e.classList.add("checked"),0!==a)return h.openCellPlay(),this.checkWeitherWin(),e.classList.remove("flag"),e.innerText=a,1===a&&e.classList.add("one"),2===a&&e.classList.add("two"),3===a&&e.classList.add("three"),4===a&&e.classList.add("four"),5===a&&e.classList.add("five"),6===a&&e.classList.add("six"),7===a&&e.classList.add("seven"),void(8===a&&e.classList.add("eight"));e.classList.remove("flag"),this.checkEmptyNeighbourCells(Number(s)),this.checkWeitherWin()}checkEmptyNeighbourCells(e){const t=e%this.widthCells==0,s=e%this.widthCells==this.widthCells-1;setTimeout((()=>{if(e>0&&!t){const t=this.cellsNodeArr[e-1];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e<this.cellsNodeArr.length&&!s){const t=this.cellsNodeArr[e+1];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e>=this.widthCells){const t=this.cellsNodeArr[e-this.widthCells];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e<this.cellsNodeArr.length-this.widthCells){const t=this.cellsNodeArr[e+this.widthCells];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e>this.widthCells&&!t){const t=this.cellsNodeArr[e-this.widthCells-1];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e>=this.widthCells&&!s){const t=this.cellsNodeArr[e-this.widthCells+1];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e<this.cellsNodeArr.length-this.widthCells&&!t){const t=this.cellsNodeArr[e+this.widthCells-1];this.handleMouseUp(t),h.openSeveralCellsPlay()}if(e<this.cellsNodeArr.length-this.widthCells-1&&!s){const t=this.cellsNodeArr[e+this.widthCells+1];this.handleMouseUp(t),h.openSeveralCellsPlay()}}),5)}handleAddFlag(e){e.classList.contains("checked")||(e.classList.contains("flag")?(e.classList.remove("flag"),this.bombsLeftToReveal++):(e.classList.add("flag"),this.bombsLeftToReveal--),h.flagSetPlay())}handleMouseOver(e){this.mouseDown&&!e.target.classList.contains("flag")&&e.target.classList.add("pressed")}handleMouseOut(e){e.target.classList.remove("pressed")}saveGameResult(){const e={date:new Date,difficulty:`${this.widthCells}*${this.heightCells}`,mines:this.bombAmount,time:this.timer,movies:this.clickCount};this.lastResults=m("lastResults")||[],this.lastResults.push(e),this.lastResults.length>10&&this.lastResults.splice(0,1),c("lastResults",this.lastResults)}saveCurrentProgress(){const e=Array.from(document.querySelectorAll(".cell")),t=e.map((e=>!!e.classList.contains("checked")&&"checked")),s=e.map((e=>!!e.classList.contains("flag")&&"flag")),i={cellsClassArr:this.cellsClassArr,arrayWithNumbersInCells:this.arrayWithNumbersInCells,checkedCellsArr:t,flagCellsArr:s,timer:this.timer,clickCount:this.clickCount,width:this.widthCells,height:this.heightCells,bombAmount:this.bombAmount,isGameLosed:this.isGameLosed,isGameWon:this.isGameWon,explodedCellId:this.explodedCellId||null};c("savedLastProgress",i)}restoreProgress(){const e=m("savedLastProgress");if(e){this.stopTimer(),this.cellsClassArr=[],this.arrayWithNumbersInCells=[],this.arrayWithNumbersInCells=e.arrayWithNumbersInCells,this.cellsClassArr=e.cellsClassArr,this.widthCells=e.width,this.heightCells=e.height,this.bombAmount=e.bombAmount,this.tempBombAmount=e.bombAmount,this.explodedCellId=e.explodedCellId,this.createBoard(),this.cellsNodeArr=document.querySelectorAll(".cell");for(let t=0;t<this.cellsNodeArr.length;t++){const s=this.cellsNodeArr[t];s.setAttribute("id",t),e.checkedCellsArr[t]&&s.classList.add(e.checkedCellsArr[t]),e.flagCellsArr[t]&&s.classList.add(e.flagCellsArr[t]),0!==e.arrayWithNumbersInCells[t]&&s.classList.contains("checked")&&(s.innerText=e.arrayWithNumbersInCells[t],1===e.arrayWithNumbersInCells[t]&&s.classList.add("one"),2===e.arrayWithNumbersInCells[t]&&s.classList.add("two"),3===e.arrayWithNumbersInCells[t]&&s.classList.add("three"),4===e.arrayWithNumbersInCells[t]&&s.classList.add("four"),5===e.arrayWithNumbersInCells[t]&&s.classList.add("five"),6===e.arrayWithNumbersInCells[t]&&s.classList.add("six"),7===e.arrayWithNumbersInCells[t]&&s.classList.add("seven"),8===e.arrayWithNumbersInCells[t]&&s.classList.add("eight"))}this.isGameLosed=e.isGameLosed,this.isGameWon=e.isGameWon,this.timer=e.timer,this.clickCount=e.clickCount,p.switchActiveButton(this.widthCells),w.updateTimer(this.timer),this.startTimer(),w.updateMoviesData(e.clickCount),this.checkWeitherWin(),e.isGameLosed&&(this.explodedCell=document.getElementById(e.explodedCellId),e.explodedCellId&&this.explodedCell.classList.add("exploded-cell"),this.gameLosed())}}addListeners(){window.addEventListener("mousedown",(e=>this.handleMouseDown(e))),window.addEventListener("mouseup",(e=>this.handleMouseUp(e.target,e.button))),window.addEventListener("contextmenu",(e=>{e.target.classList.contains("cell")&&e.preventDefault()})),this.addMouseOverListeners(),window.addEventListener("beforeunload",(e=>this.saveCurrentProgress(e)))}addMouseOverListeners(){document.querySelectorAll(".cell").forEach((e=>{e.addEventListener("mouseover",(e=>this.handleMouseOver(e))),e.addEventListener("mouseout",(e=>this.handleMouseOut(e)))}))}gameLosed(){h.loseGamePlay();for(let e=0;e<this.cellsNodeArr.length;e++){const t=this.cellsNodeArr[e];"bomb"!==this.cellsClassArr[e]||t.classList.contains("flag")||t.classList.add("bomb")}a.renderWinModal({isWin:!1},"Game over. Try again"),this.stopTimer(),this.isGameLosed=!0}checkWeitherWin(){const e=document.querySelectorAll(".checked"),t=this.cellsClassArr.length-e.length,s=document.querySelectorAll(".cell:not(.checked)");this.tempBombAmount===t&&(s.forEach((e=>e.classList.add("flag"))),setTimeout((()=>{let e=`Hooray! You found all mines in ${this.timer} seconds and ${this.clickCount} moves!`;a.renderWinModal({isWin:!0},e),this.stopTimer()}),0),h.winGamePlay(),this.isGameWon=!0,this.saveGameResult())}startTimer(){this.interval=setInterval((()=>{this.timer=this.timer+1,w.updateTimer(this.timer)}),1e3)}stopTimer(){clearInterval(this.interval),this.interval=null}switchDifficulty({width:e,height:t}){this.widthCells=e,this.heightCells=t,this.createBoard(),this.createBombsDataArrs(),this.startNewGame()}changeBombsAmount(e){this.bombAmount=Number(e)}changeWidthCells(){this.boardWrapperOutside.node.classList.remove("boardWrapperOutside-m"),this.boardWrapperOutside.node.classList.remove("boardWrapperOutside-l"),this.boardWrapperInside.node.classList.remove("boardWrapperInside-m"),this.boardWrapperInside.node.classList.remove("boardWrapperInside-l"),15===this.widthCells&&(this.boardWrapperOutside.node.classList.add("boardWrapperOutside-m"),this.boardWrapperInside.node.classList.add("boardWrapperInside-m")),25===this.widthCells&&(this.boardWrapperOutside.node.classList.add("boardWrapperOutside-l"),this.boardWrapperInside.node.classList.add("boardWrapperInside-l"))}};document.addEventListener("DOMContentLoaded",f.init())})();